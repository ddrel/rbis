<div class="row" ng-init="init()">
    <div class="page-bar page-bar-color2">
                    <ul class="page-breadcrumb">
                        <li>
                            <i class="fa fa-home"></i>
                            <a href="/#/dashboard">Home</a>						
                        </li>										
                    </ul>
    </div>
<div>
<div class="">
<md-sidenav class="md-sidenav-left" md-component-id="left" md-whiteframe="4">            
<md-content layout-margin>                                    
    <div class="portlet box blue-madison">
            <div class="portlet-title">
                <div class="caption">
                    <i class="fa fa-info"></i>&nbsp; Information Details
                </div>
            </div>
            <div class="portlet-body">
                <tabset>
                    <tab><tab-heading><i class="fa fa-road"></i></tab-heading><div id="roadattrttabledashboard"></div>
                    </tab>
                    <tab ng-click="onmaptabclick()"><tab-heading><i class="fa fa-map" aria-hidden="true"></i></tab-heading>
                        <div id="roadmapdashboard" style=" display: block;outline: medium none;position: relative;z-index: 0;width:100%;height:400px;"> </div>
                    </tab>                           
                </tabset>
            </div>
    </div>                                    
            
    <div class="portlet box blue-madison">
            <div class="portlet-title">
                <div class="caption">
                    <i class="fa fa-file"></i>&nbsp; Media
                </div>
            </div>
            <div class="portlet-body">
                <md-tabs md-dynamic-height md-border-bottom>    
                    <md-tab label="Attachment"> 
                                <file-list style="max-height:200px;overflow-y:auto" readonly="true" list="modelData.currentItem.file_attachment"></file-list> 
                        </md-tab>
                        <md-tab  label="Road Images"> 
                                <div class="lightBoxGallery" style="max-height:200px;overflow-y:auto">
                                    <ui-gallery readonly ="true" list="modelData.roadImageList" options="{container:'#blueimp-gallery-dashboard'}"></ui-gallery>                 
                                </div>                                       
                        </md-tab>
                </md-tabs>
            </div>
    </div>

    <div class="portlet box blue-madison">
            <div class="portlet-title">
                <div class="caption">
                    <i class="fa fa-flag"></i>&nbsp; Remarks/Status
                </div>
            </div>
            <div class="portlet-body">
                    <form-remarks options="optionStatus" readonly="false" status="" list="modelData.currentItem.remarks_trail"  onsumbit="onRemarksSubmit(a,b)"></form-remarks>                            
            </div>
    </div>                                            
</md-content>            
</md-sidenav>
<md-tabs md-dynamic-height md-border-bottom>
            <md-tab label="Summary">
                <md-content class="md-padding">
                        <div class="col-lg-3 col-md-3 col-sm-6 col-xs-12">
                            <div class="dashboard-stat blue-madison">
                                <div class="visual">
                                    <i class="fa fa-road"></i>
                                </div>
                                <div class="details">
                                    <div class="number">
                                            {{ summary.roadlengthtotal || 0}}
                                    </div>
                                    <div class="desc">
                                            Total Road Length (km)
                                    </div>
                                </div>
                                <a class="more" href="#">
                                View details <i class="m-icon-swapright m-icon-white"></i>
                                </a>
                            </div>
                        </div>
                        <div class="col-lg-3 col-md-3 col-sm-6 col-xs-12">
                            <div class="dashboard-stat green-haze">
                                <div class="visual">
                                    <i class="fa fa-bar-chart-o"></i>
                                </div>
                                <div class="details">
                                    <div class="number">
                                            {{ summary.totalbridgelength || 0}}
                                    </div>
                                    <div class="desc">
                                            Total Bridge Length (km)
                                    </div>
                                </div>
                                <a class="more" href="#">
                                View details <i class="m-icon-swapright m-icon-white"></i>
                                </a>
                                <!--
                                <a class="more" href="bridges.aspx">
                                View details <i class="m-icon-swapright m-icon-white"></i>
                                </a>
                                //-->
                            </div>
                        </div>
                        <div class="col-lg-3 col-md-3 col-sm-6 col-xs-12">
                            <div class="dashboard-stat purple-plum">
                                <div class="visual">
                                    <i class="glyphicon glyphicon-stats"></i>
                                </div>
                                <div class="details">
                                    <div class="number">
                                            {{summary.segmentcount || 0}}
                                    </div>
                                    <div class="desc">
                                            No. of Road Segments
                                    </div>
                                </div>
                                <a class="more" href="#">
                                View details <i class="m-icon-swapright m-icon-white"></i>
                                </a>
                            </div>
                        </div>
                        <div class="col-lg-3 col-md-3 col-sm-6 col-xs-12">
                            <div class="dashboard-stat yellow-casablanca">
                                <div class="visual">
                                    <i class="fa fa-compass"></i>
                                </div>
                                <div class="details">
                                    <div class="number">Php ---</div><div class="desc">Total Asset Value (Million)</div>
                                </div>
                                <a class="more" href="#">
                                View details <i class="m-icon-swapright m-icon-white"></i>
                                </a>
                            </div>
                        </div>
                        <!--  Chart -->
                        <div class="row">
                            <div class="col-md-6">
                                <div class="portlet box yellow-casablanca">
                                    <div class="portlet-title">
                                        <div class="caption">
                                            <i class="fa fa-gift"></i>&nbsp; Surface Types
                                        </div>
                                    </div>
                                    <div class="portlet-body">	
                                        <table class="table-legend">
                                            <tr>
                                                <td><div class="st-chart-legend" style="background-color:{{colorST('C')}}"></div>&nbsp;Concrete: <font class="percent-value">{{getpercent(summary.surfacetype.Concrete,summary.surfacetype.total)}}</font></td>
                                                <td><div class="st-chart-legend" style="background-color:{{colorST('A')}}"></div>&nbsp;Asphalt: <font class="percent-value">{{getpercent(summary.surfacetype.Asphalt,summary.surfacetype.total)}}</font></td>
                                                <td><div class="st-chart-legend" style="background-color:{{colorST('G')}}"></div>&nbsp;Gravel: <font class="percent-value">{{getpercent(summary.surfacetype.Gravel,summary.surfacetype.total)}}</font></td>
                                                <td><div class="st-chart-legend" style="background-color:{{colorST('E')}}"></div>&nbsp;Earth: <font class="percent-value">{{getpercent(summary.surfacetype.Earth,summary.surfacetype.total)}}</font></td>
                                                <td><div class="st-chart-legend" style="background-color:{{colorST('M')}}"></div>&nbsp;Mixed: <font class="percent-value">{{getpercent(summary.surfacetype.Mixed,summary.surfacetype.total)}}</font></td>
                                            </tr>
                                            <tr>
                                                <td align="right">{{formatToDecimal(summary.surfacetypeCount.Concrete)}}&nbsp;</td>
                                                <td align="right">{{formatToDecimal(summary.surfacetypeCount.Asphalt)}}&nbsp;</td>
                                                <td align="right">{{formatToDecimal(summary.surfacetypeCount.Gravel)}}&nbsp;</td>
                                                <td align="right">{{formatToDecimal(summary.surfacetypeCount.Earth)}}&nbsp;</td>
                                                <td align="right">{{formatToDecimal(summary.surfacetypeCount.Mixed)}}&nbsp;</td>
                                            </tr>
                                            <tr>
                                                <td colspan="4"></td>
                                                <td align="right">Total:&nbsp; <b>{{ formatToDecimal(summary.surfacetypeCount.total)}}&nbsp;</b></td>
                                            </tr>
                                            <tr>
                                                <td align="right">{{formatToDecimal(summary.surfacetype.Concrete)}}Km&nbsp;</td>
                                                <td align="right">{{formatToDecimal(summary.surfacetype.Asphalt)}}Km&nbsp;</td>
                                                <td align="right">{{formatToDecimal(summary.surfacetype.Gravel)}}Km&nbsp;</td>
                                                <td align="right">{{formatToDecimal(summary.surfacetype.Earth)}}Km&nbsp;</td>
                                                <td align="right">{{formatToDecimal(summary.surfacetype.Mixed)}}Km&nbsp;</td>
                                            </tr>
                                            <tr>
                                                <td colspan="4"></td>
                                                <td align="right">Total(Km):&nbsp; <b>{{ formatToDecimal(summary.surfacetype.total)}}&nbsp;</b></td>
                                            </tr>  
                                        </table>
                                        </br>    
                                        <canvas id="chart_surfacetype" class="chart chart-doughnut"
                                        chart-colours="summary.chart.st.colors" chart-data="summary.chart.st.data" chart-labels="summary.chart.st.labels">
                                        </canvas> 						
                                    </div>
                                </div>					
                            </div>
                            <div class="col-md-6">
                                <div class="portlet box blue-madison">
                                    <div class="portlet-title">
                                        <div class="caption">
                                            <i class="fa fa-wrench"></i>&nbsp; Surface Condition
                                        </div>
                                    </div>
                                    <div class="portlet-body">
                                        <table class="table-legend">
                                            <tr>
                                                <td><div class="st-chart-legend" style="background-color:{{colorSC('N')}}"></div>&nbsp;New: <font class="percent-value">{{getpercent(summary.surfacecon.New,summary.surfacecon.total)}}</font></td>
                                                <td><div class="st-chart-legend" style="background-color:{{colorSC('G')}}"></div>&nbsp;Good: <font class="percent-value">{{getpercent(summary.surfacecon.Good,summary.surfacecon.total)}}</font></td>
                                                <td><div class="st-chart-legend" style="background-color:{{colorSC('F')}}"></div>&nbsp;Fair: <font class="percent-value">{{getpercent(summary.surfacecon.Fair,summary.surfacecon.total)}}</font></td>
                                                <td><div class="st-chart-legend" style="background-color:{{colorSC('B')}}"></div>&nbsp;Bad: <font class="percent-value">{{getpercent(summary.surfacecon.Bad,summary.surfacecon.total)}}</font></td>
                                                <td><div class="st-chart-legend" style="background-color:{{colorSC('P')}}"></div>&nbsp;Poor: <font class="percent-value">{{getpercent(summary.surfacecon.Poor,summary.surfacecon.total)}}</font></td>
                                            </tr>
                                            <tr>
                                                <td align="right">{{formatToDecimal(summary.surfaceconCount.New)}}&nbsp;</td>
                                                <td align="right">{{formatToDecimal(summary.surfaceconCount.Good)}}&nbsp;</td>
                                                <td align="right">{{formatToDecimal(summary.surfaceconCount.Fair)}}&nbsp;</td>
                                                <td align="right">{{formatToDecimal(summary.surfaceconCount.Bad)}}&nbsp;</td>
                                                <td align="right">{{formatToDecimal(summary.surfaceconCount.Poor)}}&nbsp;</td>
                                            </tr>
                                            <tr>
                                                <td colspan="4"></td>
                                                <td align="right">Total:&nbsp; <b>{{ formatToDecimal(summary.surfaceconCount.total)}}&nbsp;</b></td>
                                            </tr>
                                            <tr>
                                                <td align="right">{{formatToDecimal(summary.surfacecon.New)}}Km&nbsp;</td>
                                                <td align="right">{{formatToDecimal(summary.surfacecon.Good)}}Km&nbsp;</td>
                                                <td align="right">{{formatToDecimal(summary.surfacecon.Fair)}}Km&nbsp;</td>
                                                <td align="right">{{formatToDecimal(summary.surfacecon.Bad)}}Km&nbsp;</td>
                                                <td align="right">{{formatToDecimal(summary.surfacecon.Poor)}}Km&nbsp;</td>
                                            </tr>
                                            <tr>
                                                <td colspan="4"></td>
                                                <td align="right">Total(Km):&nbsp; <b>{{ formatToDecimal(summary.surfacecon.total)}}&nbsp;</b></td>
                                            </tr>  
                                        </table>
                                        </br>
                                        <canvas id="chart_surfacecondition" class="chart chart-doughnut"
                                            chart-colours="summary.chart.sc.colors" chart-data="summary.chart.sc.data" chart-labels="summary.chart.sc.labels">
                                        </canvas>
                                    </div>
                                </div>					
                            </div>
			            </div><!-- End row chart-->                                    
                </md-content>
             </md-tab>
             <md-tab md-on-select="ontabselected('review')" ng-if="(user.role=='SUPERVISOR' || user.role=='SUPER ADMINISTRATOR') && modelData.review.List.length>0" label="For Review ({{ modelData.review.rowcount}})">
                <md-content class="md-padding">                    
                <div class="row" style="min-height:600px;">
                    <div class="col-md-12">
                    <table class="table table-bordered-2 table-roadmain">            
                        <thead>
                            <tr class="table-head">
                                <td>Identifier</td>
                                <td>Type</td>
                                <td>Road ID</td>
                                <td>Road</td>
                                <td>Class</td>
                                <td>Status</td>
                                <td>Submitted By</td>
                                <td>Submitted Date</td>
                                <td width="157px" align="center">Action</td>
                            </tr>
                        </thead>   
                        <tbody>
                            <tr ng-repeat="fr_item in modelData.review.List"> 
                                <td>{{ fr_item.identifier }}</td>
                                <td>{{ fr_item.attr_type }}</td>
                                <td>{{ fr_item.r_id }}</td>
                                <td>{{ fr_item.road_name }}</td>
                                <td>{{ fr_item.road_class }}</td>
                                <td>{{ fr_item.status }}</td>
                                <td title="{{ fr_item.submit_by.name }}({{ fr_item.submit_by.email }})">{{ fr_item.submit_by.name }}</td>
                                <td>{{ formatDate(fr_item.submit_date) }}</td>
                                <td align="center" style="padding:2px;">
                                        <a href="" class="btn btn-primary2 " ng-click="onloaddata(fr_item,'review')">Review</a>
                                </td>
                            </tr>
                        </tbody>
                        <tfoot>
                            <tr>
                                <td align="left" colspan="9">
                                    <!-- previous-text="&lsaquo;" next-text="&rsaquo;" first-text="&laquo;" last-text="&raquo;" -->                            
                                    <pagination  ng-show="modelData.review.List.length>0" ng-change="pageChangedReview(modelData.review.pagination.CurrentPage)" rotate="false" boundary-link-numbers="false" total-items="(modelData.review.pagination.max * 10)" ng-model="modelData.review.pagination.CurrentPage" max-size="modelData.review.pagination.max" class="pagination-sm" boundary-links="true">
                                    </pagination>
                                </td>    
                            </tr>    
                        </tfoot>
                     </table>             
                    </div>
                </div>                                                            
                </md-content>
             </md-tab>
            <md-tab label="Validated ({{modelData.validated.rowcount}})" md-on-select="ontabselected('validated')" ng-if="(user.role=='SUPERVISOR' || user.role=='SUPER ADMINISTRATOR') && modelData.validated.List.length>0">
                <md-content>
                <md-content class="md-padding">                                
                    <div class="row" style="min-height:600px;">
                        <div class="col-md-12">
                            <table class="table table-bordered-2 table-roadmain">            
                                <thead>
                                    <tr class="table-head">
                                        <td>Identifier</td>
                                        <td>Type</td>
                                        <td>Road ID</td>
                                        <td>Road</td>
                                        <td>Class</td>
                                        <td>Status</td>
                                        <td>Validated By</td>
                                        <td>Validated Date</td>
                                        <td width="157px" align="center">Action</td>
                                    </tr>
                                </thead>   
                                <tbody>
                                    <tr ng-repeat="fr_item in modelData.validated.List"> 
                                        <td>{{ fr_item.identifier }}</td>
                                        <td>{{ fr_item.attr_type }}</td>
                                        <td>{{ fr_item.r_id }}</td>
                                        <td>{{ fr_item.road_name }}</td>
                                        <td>{{ fr_item.road_class }}</td>
                                        <td>{{ fr_item.status }}</td>
                                        <td title="{{ fr_item.validated_by.name }}({{ fr_item.validated_by.email }})">{{ fr_item.validated_by.name }}</td>
                                        <td>{{ formatDate(fr_item.validated_dated) }}</td>
                                        <td align="center" style="padding:2px;">
                                                <a href="" class="btn btn-primary2 " ng-click="onloaddata(fr_item,'validated')">Change Status</a>
                                        </td>
                                    </tr>
                                </tbody>
                                <tfoot>
                                    <tr>
                                        <td align="left" colspan="9">
                                            <!-- previous-text="&lsaquo;" next-text="&rsaquo;" first-text="&laquo;" last-text="&raquo;" -->
                                            <pagination  ng-show="modelData.validated.List.length>0" ng-change="pageChangedValidated(modelData.validated.pagination.CurrentPage)" rotate="false" boundary-link-numbers="false" total-items="(modelData.validated.pagination.max * 10)" ng-model="modelData.validated.pagination.CurrentPage" max-size="modelData.validated.pagination.max" class="pagination-sm" boundary-links="true">
                                            </pagination>
                                        </td>    
                                    </tr>    
                                </tfoot>
                            </table>
                        </div>
                    </div>        
                </md-content>
            </md-tab>                  
            <md-tab label="Timeline">
                <md-content>
                    <pagination  ng-show="roadlogs.List.length>0" ng-change="pageChangedLogs(roadlogs.pagination.CurrentPage)" rotate="false" boundary-link-numbers="false" total-items="(roadlogs.pagination.max * 10)" ng-model="roadlogs.pagination.CurrentPage" max-size="roadlogs.pagination.max" class="pagination-sm" boundary-links="true">
                    </pagination>
                     <timeline>
                        <timeline-event ng-repeat="roadlog in roadlogs.List" side="alternate">
                        <timeline-badge class="{{roadlog.badgeClass}}">
                            <i class="glyphicon {{roadlog.badgeIconClass}}"></i>
                        </timeline-badge>
                        <timeline-panel class="{{roadlog.badgeClass}}">
                            <timeline-heading>
                            <h4><font color="#f39b40">{{roadlog.date}}</font></h4>                            
                            </timeline-heading>
                            <h4><font color="#2e86d3">{{roadlog.email}}</font> | {{roadlog.text}}</h4>
                            <div ng-repeat="field in roadlog.fields">{{field.key}} : {{field.value}}</div>
                        </timeline-panel>
                        </timeline-event>
                    </timeline>
                    <pagination  ng-show="roadlogs.List.length>0" ng-change="pageChangedLogs(roadlogs.pagination.CurrentPage)" rotate="false" boundary-link-numbers="false" total-items="(roadlogs.pagination.max * 10)" ng-model="roadlogs.pagination.CurrentPage" max-size="roadlogs.pagination.max" class="pagination-sm" boundary-links="true">
                    </pagination>
                </md-content>    
            </md-tab>   
            <md-tab label="System Status" ng-if="user.role=='SUPER ADMINISTRATOR'">
                <iframe frameborder="0" style="overflow:hidden;height:800px;width:100%" height="800px" width="100%" src="/status"></iframe>  
            </md-tab>                                  
</md-tabs>
</div>
<div id="blueimp-gallery-dashboard" class="blueimp-gallery blueimp-gallery-controls blueimp-gallery-display" style="display:none;">
        <div class="slides"></div>
        <h3 class="title"></h3>
        <a class="prev">‹</a>
        <a class="next">›</a>
        <a class="close">×</a>
        <a class="play-pause"></a>
        <ol class="indicator"></ol>
</div>
    
